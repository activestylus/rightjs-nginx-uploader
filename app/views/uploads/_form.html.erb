<%= form_for @upload, :html => {:multipart => true} do |f| %>
  <% if @upload.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@upload.errors.count, "error") %> prohibited this upload from being saved:</h2>

      <ul>
      <% @upload.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= f.label :file %><br>
    <%= f.file_field :file %>
  </div>
  <div class="preview"></div>
  <div class="actions"><%= f.submit %></div>
<% end %>

<% content_for :js do %>
  <script type='text-javascript'>
    new Uploader('new_upload', {
      timeout: 400,
      onError: function() {
        alert("Oh shizzel!");
      },
      onComplete: function() {
        alert("Oh yeah!");
      }
    });
  </script>
<% end %>