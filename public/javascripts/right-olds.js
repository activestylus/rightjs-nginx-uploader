/**
 * This is old browsers support patch for RightJS
 *
 * The library released under terms of the MIT license
 * Visit http://rightjs.org for more details
 *
 * Copyright (C) 2008-2010 Nikolay V. Nemshilov
 */
if(RightJS.Browser.OLD&&RightJS.Browser.IE)$=RightJS.$=function(c){return function(f){var e=c(f);if(e&&e instanceof RightJS.Element&&RightJS.isString(f)&&e._.id!==f)e=RightJS.$(document).first("#"+f);return e}}(RightJS.$);function event_support_for(c,f){var e=document.createElement(f);e.setAttribute(c,";");return isFunction(e[c])}
if(!event_support_for("onsubmit","form")){var submit_boobler=function(c){var f=$(c),e=f.target._,o=e.type;e=e.form;var x;if(e&&(x=$(e).parent())&&(c.keyCode===13&&(o==="text"||o==="password")||c.type==="click"&&(o==="submit"||o==="image"))){f.type="submit";f.target=$(e);x.fire(f)}};document.attachEvent("onclick",submit_boobler);document.attachEvent("onkeypress",submit_boobler)}
if(!event_support_for("onchange","input")){var get_input_value=function(c){var f=c._,e=f.type;return e==="radio"||e==="checkbox"?f.checked:c.getValue()},change_boobler=function(c,f){var e=f.parent(),o=get_input_value(f);if(e&&""+f._prev_value!==""+o){f._prev_value=o;c.type="change";e.fire(c)}},catch_inputs_access=function(c){c=$(c);var f=c.target,e=f._.type,o=f._.tagName,x=e==="radio"||e==="checkbox";if(c.type==="click"&&(x||o==="SELECT")||c.type==="keydown"&&(c.keyCode==13&&o!=="TEXTAREA"||e==="select-multiple"))change_boobler(c,
f)},catch_input_left=function(c){c=$(c);var f=c.target;f instanceof Input&&change_boobler(c,f)};document.attachEvent("onclick",catch_inputs_access);document.attachEvent("onkeydown",catch_inputs_access);document.attachEvent("onfocusout",catch_input_left);document.attachEvent("onbeforeactivate",function(c){c=$(c).target;if(c instanceof Input)c._prev_value=get_input_value(c)})}
RightJS.$E("p").getBoundingClientRect||RightJS.Element.include({position:function(){var c=this._,f=c.offsetTop,e=c.offsetLeft;for(c=c.offsetParent;c;){f+=c.offsetTop;e+=c.offsetLeft;c=c.offsetParent}return{x:e,y:f}}});
(function(c){var f=!!document.querySelector,e=!f;try{document.createElement("<input/>");e=true}catch(o){}if(e){var x={" ":function(a,b){return c.$A(a.getElementsByTagName(b))},">":function(a,b){for(var d=[],h=a.firstChild;h;){if(b==="*"||h.tagName===b)d.push(h);h=h.nextSibling}return d},"+":function(a,b){for(;a=a.nextSibling;)if(a.tagName)return b==="*"||a.tagName===b?[a]:[];return[]},"~":function(a,b){for(var d=[];a=a.nextSibling;)if(b==="*"||a.tagName===b)d.push(a);return d}},s={not:function(a,
b){return!c.$(a).match(b)},checked:function(a){return a.checked===true},enabled:function(a){return a.disabled===false},disabled:function(a){return a.disabled===true},selected:function(a){return a.selected===true},empty:function(a){return!a.firstChild},"first-child":function(a,b){for(;a=a.previousSibling;)if(a.nodeType===1&&(b===null||a.nodeName===b))return false;return true},"first-of-type":function(a){return s["first-child"](a,a.nodeName)},"last-child":function(a,b){for(;a=a.nextSibling;)if(a.nodeType===
1&&(b===null||a.nodeName===b))return false;return true},"last-of-type":function(a){return s["last-child"](a,a.nodeName)},"only-child":function(a,b){return s["first-child"](a,b)&&s["last-child"](a,b)},"only-of-type":function(a){return s["only-child"](a,a.nodeName)},"nth-child":function(a,b,d,h){var l=1,i=b[0];for(b=b[1];a=h===true?a.nextSibling:a.previousSibling;)if(a.nodeType===1&&(d===undefined||a.nodeName===d))l++;return b===undefined?l===i:(l-b)%i===0&&(l-b)/i>=0},"nth-of-type":function(a,b){return s["nth-child"](a,
b,a.nodeName)},"nth-last-child":function(a,b){return s["nth-child"](a,b,undefined,true)},"nth-last-of-type":function(a,b){return s["nth-child"](a,b,a.nodeName,true)}},E=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,J=/#([\w\-_]+)/,K=/^[\w\*]+/,L=/\.([\w\-\._]+)/,M=/:([\w\-]+)(\((.+?)\))*$/,N=/\[((?:[\w\-]*:)?[\w\-]+)\s*(?:([!\^$*~|]?=)\s*((['"])([^\4]*?)\4|([^'"][^\]]*?)))?\]/,z={},Q=function(a){if(!z[a]){for(var b,d,h,l,i,
j,g,n={},m=a;d=m.match(N);){i=i||{};i[d[1]]={o:d[2]||"",v:d[5]||d[6]||""};m=m.replace(d[0],"")}if(d=m.match(M)){j=d[1];g=d[3]===""?null:d[3];if(j.startsWith("nth")){g=g.toLowerCase();if(g==="n")g=j=null;else{if(g==="odd")g="2n+1";if(g==="even")g="2n";var p=/^([+\-]?\d*)?n([+\-]?\d*)?$/.exec(g);g=p?[p[1]==="-"?-1:parseInt(p[1],10)||1,parseInt(p[2],10)||0]:[parseInt(g,10),undefined]}}m=m.replace(d[0],"")}b=(m.match(J)||[1,null])[1];d=(m.match(K)||"*").toString().toUpperCase();h=(m.match(L)||[1,""])[1].split(".").without("");
l=h.length;n.tag=d;if(b||h.length||i||j){b=b||false;i=i||false;j=j in s?s[j]:false;h=l?h:false;n.filter=function(t){for(var v,F=[],A=0,O=0,P=t.length,y;A<P;A++){v=t[A];if(!(b!==false&&v.id!==b)){if(h!==false){var q=v.className.split(" "),u=q.length,r=0;for(y=false;r<l;r++){for(var B=0,G=false;B<u;B++)if(h[r]===q[B]){G=true;break}if(!G){y=true;break}}if(y)continue}if(i!==false){var w;y=false;for(w in i){q=w==="class"?v.className:v.getAttribute(w)||"";u=i[w].o;r=i[w].v;if(u===""&&(w==="class"||w===
"lang"?q==="":v.getAttributeNode(k)===null)||u==="="&&q!==r||u==="*="&&q.indexOf(r)===-1||u==="^="&&q.indexOf(r)!==0||u==="$="&&q.substring(q.length-r.length)!==r||u==="~="&&q.split(" ").indexOf(r)===-1||u==="|="&&q.split("-").indexOf(r)===-1){y=true;break}}if(y)continue}if(j!==false)if(!j(v,g))continue;F[O++]=v}}return F}}z[a]=n}return z[a]},C={},H=function(a){var b=a.join("");if(!C[b]){for(var d=0;d<a.length;d++)a[d][1]=Q(a[d][1]);var h=$uid,l=function(j){for(var g=[],n=[],m,p=0,t=j.length;p<t;p++){m=
h(j[p]);if(!n[m]){g.push(j[p]);n[m]=true}}return g},i=function(j,g){var n=x[g[0]](j,g[1].tag);return g[1].filter?g[1].filter(n):n};C[b]=function(j){for(var g,n,m=0,p=a.length;m<p;m++)if(m===0)g=i(j,a[m]);else{if(m>1)g=l(g);for(var t=0;t<g.length;t++){n=i(g[t],a[m]);n.unshift(1);n.unshift(t);g.splice.apply(g,n);t+=n.length-3}}return a.length>1?l(g):g}}return C[b]},D={},I=function(a,b){var d;if(!D[b]){E.lastIndex=0;d=[];for(var h=[],l=" ",i,j;i=E.exec(b);){j=i[1];if(j==="+"||j===">"||j==="~")l=j;else{h.push([l,
j]);l=" "}if(i[2]){d.push(H(h));h=[]}}d.push(H(h));D[b]=d}d=D[b];h=[];l=0;for(i=d.length;l<i;l++)h=h.concat(d[l](a));return h};e={first:function(a){return this.find(a)[0]},find:function(a,b){var d,h=a||"*",l=this._;if(f)try{d=$A(l.querySelectorAll(h))}catch(i){d=I(l,h)}else d=I(l,h);return b===true?d:d.map(c.$)}};c.Element.include(e);c.Document.include(e)}})(RightJS);
