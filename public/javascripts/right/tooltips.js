/**
 * The tooltips feature for RightJS
 * See http://rightjs.org/ui/tooltips
 *
 * Copyright (C) 2009-2010 Nikolay Nemshilov
 */
var Tooltip=RightJS.Tooltip=function(f,b){var i=b.$,l=b.$w,m=b.$uid,j=b.Element,e=new (function(a,c){if(!c){c=a;a="DIV"}var g=new b.Class(b.Element.Wrappers[a]||b.Element,{initialize:function(h,d){this.key=h;var k=[{"class":"rui-"+h}];this instanceof b.Input||this instanceof b.Form||k.unshift(a);this.$super.apply(this,k);if(b.isString(d))d=b.$(d);if(d instanceof b.Element){this._=d._;if("$listeners"in d)d.$listeners=d.$listeners;d={}}this.setOptions(d,this);return b.Wrapper.Cache[b.$uid(this._)]=
this},setOptions:function(h,d){d=d||this;b.Options.setOptions.call(this,b.Object.merge(h,eval("("+(d.get("data-"+this.key)||"{}")+")")));return this}});g=new b.Class(g,c);b.Observer.createShortcuts(g.prototype,g.EVENTS||[]);return g})({extend:{version:"2.2.0",EVENTS:l("show hide"),Options:{cssRule:"[data-tooltip]",fxName:"fade",fxDuration:400,delay:400,move:true,idSuffix:"-tooltip"},current:null,instances:b([]),find:function(a){a=a.target;if(a.match(e.Options.cssRule)){var c=m(a);return e.instances[c]||
(e.instances[c]=new e(a))}}},initialize:function(a,c){this.associate=a=i(a);this.$super("tooltip").setOptions(c,a).insert('<div class="rui-tooltip-arrow"></div><div class="rui-tooltip-container">'+(a.get("title")||a.get("alt"))+"</div>").on({mouseout:this._mouseOut,mouseover:this._cancelTimer}).insertTo(f.body);a.has("id")&&this.set("id",a.get("id")+this.options.idSuffix);a.set({title:"",alt:""})},hide:function(){this._cancelTimer();this._timer=b(function(){j.prototype.hide.call(this,this.options.fxName,
{engine:"javascript",duration:this.options.fxDuration,onFinish:b(function(){if(e.current===this)e.current=null}).bind(this)});this.fire("hide")}).bind(this).delay(100);return this},show:function(){e.instances.each(function(a){a&&a!==this&&a.hide()},this);this._timer=b(function(){j.prototype.show.call(this.stop(),this.options.fxName,{engine:"javascript",duration:this.options.fxDuration});e.current=this.fire("show")}).bind(this).delay(this.options.delay);return e.current=this},moveToEvent:function(a){if(this.options.move){this._.style.left=
a.pageX+"px";this._.style.top=a.pageY+"px"}return this},_cancelTimer:function(){if(this._timer){this._timer.cancel();this._timer=null}return false},_mouseOut:function(a){a.stop();a.relatedTarget!==this.associate&&this.hide()}});i(f).on({mouseenter:function(a){var c=e.find(a);c&&c.show().moveToEvent(a)},mouseleave:function(a){(a=e.find(a))&&a.hide()},mousemove:function(a){var c=e.current;c!==null&&c.options.move&&c.moveToEvent(a)}});(function(){var a=f.createElement("style"),c=f.createTextNode("div.rui-tooltip{display:none;position:absolute;z-index:99999;font-size:90%;margin-top:16pt;margin-left:5pt;color:#FFF;text-shadow:0 0 .2em #000;border:.3em solid rgba(255,255,255,0.2);background-color:rgba(25,25,25,0.92);background-color:#000 \\9; border:.3em solid #444 \\9; background-image:-webkit-gradient(linear,0% 0%,0% 100%,from(transparent) ,to(#000) );border-radius:.4em;-moz-border-radius:.4em;-webkit-border-radius:.4em;box-shadow:0 0 .4em #555;-moz-box-shadow:0 0 .4em #555;-webkit-box-shadow:0 0 .4em #555}div.rui-tooltip-container{margin:.4em .6em}");
a.type="text/css";if(a.styleSheet)a.styleSheet.cssText=c.nodeValue;else a.appendChild(c);f.getElementsByTagName("head")[0].appendChild(a)})();return e}(document,RightJS);
